<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Comic Canvas</title>
	<link rel="stylesheet" href="style.css">
	<script src="script.js"></script>
</head>

<body>
	<h1 class="headline">Comic Canvas</h1>
	<div class="main-content">
		<!--General Context	-->
		<div id="settingForm" class="container">

			<input id="title" class="title" type="text" placeholder="Give your story a title..." maxlength="50">
			<textarea class="textbox" maxlength="200" placeholder="Craft your own reality..." id="setting"></textarea>
			<div class="dropdowns">
				<select class="dropdown" id="style">
					<option value="">Select style</option>
					<option value="Superhero">Superhero</option>
					<option value="Manga">Manga</option>
					<option value="Cyberpunk">Cyberpunk</option>
					<option value="Realistic">Realistic</option>
				</select>
				<select class="dropdown" id="genre">
					<option value="">Select genre</option>
					<option value="Science Fiction">Science Fiction</option>
					<option value="Horror">Horror</option>
					<option value="Fantasy">Fantasy</option>
					<option value="Comedy">Comedy</option>
				</select>
			</div>
			<div class="characters">

				<h2>Characters</h2>
				<div class="character-images">
					<div class="image">
						<img src="images/character_1.png">
						<div class="input-sections">
							<input class="name" type="text" placeholder="Name" id="character_1_name">
							<select class="gender-dropdown" id="character_1_gender">
								<option value="">Select gender</option>
								<option value="female">female</option>
								<option value="male">male</option>
								<option value="other">other</option>
							</select>
							<div class="mini-heading">look</div>
							<textarea class="description" placeholder="How do I look like?"
								id="character_1_look"></textarea>
							<div class="mini-heading">personality</div>
							<textarea class="description" placeholder="Bring me to life!"
								id="character_1_personality"></textarea>
						</div>
					</div>

					<div class="image">
						<img src="images/character_2.png">
						<div class="input-sections">
							<input class="name" type="text" placeholder="Name" id="character_2_name">
							<select class="gender-dropdown" id="character_2_gender">
								<option value="">Select gender</option>
								<option value="female">female</option>
								<option value="male">male</option>
								<option value="other">other</option>
							</select>
							<div class="mini-heading">look</div>
							<textarea class="description" placeholder="How do I look like?"
								id="character_2_look"></textarea>
							<div class="mini-heading">personality</div>
							<textarea class="description" placeholder="Bring me to life!"
								id="character_2_personality"></textarea>
						</div>
					</div>

					<div class="image">
						<img src="images/character_3.png">
						<div class="input-sections">
							<input class="name" type="text" placeholder="Name" id="character_3_name">
							<select class="gender-dropdown" id="character_3_gender">
								<option value="">Select gender</option>
								<option value="female">female</option>
								<option value="male">male</option>
								<option value="other">other</option>
							</select>
							<div class="mini-heading">look</div>
							<textarea class="description" placeholder="How do I look like?"
								id="character_3_look"></textarea>
							<div class="mini-heading">personality</div>
							<textarea class="description" placeholder="Bring me to life!"
								id="character_3_personality"></textarea>
						</div>
					</div>
				</div>
			</div>
			<button onClick="sendSetting()" class="submit-button" id="submit-setting">Construct Universe</button>
			<hr>
		</div>

		<!--Next page-->
		<form id="pageForm" class="container">
			<h2>Page</h2>
			<textarea class="textbox" maxlength="500" placeholder="What happens next?" id="page_description"></textarea>
			<button class="submit-button">Let your storyline unfold...</button>
		</form>

		<!--Canvas-->
		<div class="containerflex">
			<div class="box1">
				<h2>Layout</h2>
				<div class="hiddenradio">
					<title>Page</title>
					<label>
						<input type="radio" , name="test" value="big" checked>
						<img src="images/comic layout.png" ,alt="Layout1" , width="80" , height="80">
					</label>
					<label>
						<input type="radio" name="test" value="big">
						<img src="images/comic layout 2.png" ,alt="Layout2" width="80" , height="80">
					</label><label>
						<input type="radio" name="test" value="big">
						<img src="images/comic layout 3.png" ,alt="Layout3" width="80" , height="80">
					</label>
				</div>
			</div>
			<!--choose panels-->
			<div class="box2">
				<select class="panels" name="panels">
					<option value="images/comic layout.png">Panel 1</option>
					<option value="images/comic layout.png">Panel 2</option>
					<option value="images/comic layout.png">Panel 3</option>
					<option value="images/comic layout 3.png">Panel 4</option>
				</select>

			</div>

		</div>
		<div class="container">
			<style>
				/* Set the width of the columns */
				.column1 {
					width: 30%;
					float: left;
				}

				.column2 {
					width: 70%;
					float: left;
				}
			</style>
			<div>
				<div class="column1">
					<form id="pageForm">
						<h2>Description</h2>
						<textarea class="textbox" maxlength="700" placeholder="Storyline"
							id="page_description"></textarea>
					</form>

					<style>
						/* Style for the dialogue boxes */
						.dialogue {
							display: inline-block;
							padding: 10px;
							background-color: #fff;
							border: 2px solid #67c0c86e;
							border-radius: 15px;
							margin: 10px;
						}

						/* Style for the character names */
						.character-name {
							font-weight: bold;
							margin-right: 10px;
						}
					</style>
					</head>

					<body>
						<!-- First character dialogue -->
						<div class="dialogue">
							<span class="character-name" id="char1">[Char 1 placeholder]</span>
							<span class="dialogue-text" id="dialogue1">[Insert dialogue here which is super long]</span>
						</div>
						<!-- Second character dialogue -->
						<div class="dialogue">
							<span class="character-name" id="char2">[Char 2 placeholder]</span>
							<span class="dialogue-text" id="dialogue2">[Insert dialogue here which is super long]</span>
						</div>
						<!-- Third character dialogue -->
						<div class="dialogue">
							<span class="character-name" id="char3">[Char 3 placeholder]</span>
							<span class="dialogue-text" id="dialogue3">[Insert dialogue here which is super long]</span>
						</div>
				</div>
			</div>
			<div class="column2">
				<div class="panel">
					<img class="result" src="images/comic layout 3.png" id="panelID" , width=120%,></img>
				</div>
			</div>

		</div>
	</div>
	<div class="sidebar">
		<select class="character-dropdown" id="chat-select">
			<option value="images/panda.png">Writing Buddy</option>
			<option value="images/character_1.png">Character 1</option>
			<option value="images/character_2.png">Character 2</option>
			<option value="images/character_3.png">Character 3</option>
		</select>
		<div class="speech-bubble">
			<p>This is a non-editable text field in the form of a speech bubble.</p>
		</div>
		<img src="images/panda.png" class="avatar" id="chat-image">
		<textarea class="textbox" placeholder="Ask me anything!"></textarea>
		<button class="send-button">Send!</button>
		<!-- your additional content here -->
	</div>
	<script>
		//html stuff
		const selectElement = document.querySelector(".panels");
		selectElement.addEventListener("change", (event) => {
			const result = document.querySelector(".result");
			result.src = event.target.value;
			// print result
			console.log(result);
			console.log(result.src)
			console.log(event.target.value)
			console.log(result.id)
			// TODO change dialogue box to match panel
			if (result == "Panel 1") {
				result.src == panels.panel1.panel1_image;
				// e.g change char 1 name
				var char1 = document.getElementById("char1");
				char1.innerHTML = panels.panel1.panel1_character;
			} else if (result == "Panel 2") {
				result.src == panels.panel2.panel2_image;
				// e.g change char 2 name
				var char2 = document.getElementById("char2");
				char2.innerHTML = panels.panel2.panel2_character;
				result.src = event.target.value;
			} else if (result == "Panel 3") {
				result.src == panels.panel3.panel3_image;
				var char3 = document.getElementById("char3");
				char3.innerHTML = panels.panel3.panel3_character;
			} else if (result == "Panel 4") {
				result.src == panels.panel4.panel4_image;
				var char4 = document.getElementById("char4");
				char4.innerHTML = panels.panel4.panel4_character;
			}
		});

		// panels[panel1][panel1_image]
		// dynamic list for panels
		var panels = {
			"panel1": {
				"panel1_image": "images/Placeholder.png",
				"panel1_dialogue": "This is a dialogue text",
				"panel1_character": "Character 1 name"
			},
			"panel2": {
				"panel2_image": "images/Placeholder2.png",
				"panel2_dialogue": "This is a dialogue text",
				"panel2_character": "character 2 name"
			},
			"panel3": {
				"panel3_image": "images/comic layout 3.png",
				"panel3_dialogue": "This is a dialogue text",
				"panel3_character": "character 3 name"
			},
			"panel4": {
				"panel4_image": "images/comic layout 4.png",
				"panel4_dialogue": "This is a dialogue text",
				"panel4_character": "Character 4 name"
			}
		}

		const imageSelector = document.getElementById('chat-select');
		const image = document.getElementById('chat-image');

		// add an event listener to the select element
		imageSelector.addEventListener('change', function () {
			// get the selected value
			const selectedValue = imageSelector.value;

			// set the src attribute of the image element to the selected value
			image.src = selectedValue;
		});

		const char1name = document.getElementById("character_1_name")
		const char2name = document.getElementById("character_2_name")
		const char3name = document.getElementById("character_3_name")
		const chatselect = document.getElementById("chat-select")
		char1name.addEventListener('input', function () {
			// get the value of the input field
			var name = char1name.value;
			// update the text of the selected option
			const selectedOption = chatselect.options[1];
			selectedOption.textContent = name;
		});
		char2name.addEventListener('input', function () {
			// get the value of the input field
			var name = char2name.value;
			// update the text of the selected option
			const selectedOption = chatselect.options[2];
			selectedOption.textContent = name;
		});
		char3name.addEventListener('input', function () {
			// get the value of the input field
			var name = char3name.value;
			// update the text of the selected option
			const selectedOption = chatselect.options[3];
			selectedOption.textContent = name;
		});


		//Communicate with server
		var prefix = 'http://192.168.2.2:6969'


		function parseJSON(response) {
			// Check if the response is valid
			if (!response.ok) {
				throw Error(response.statusText);
			}
			// Parse the JSON from the response
			return response.json();
		}

		function postJSON(data) {
			// Make a POST request to the server with the JSON data
			fetch((prefix + '/global'), {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(data)
			})
				.then(response => {
					// Handle the response from the server
					console.log(response);
				})
				.catch(error => {
					// Handle any errors that occurred during the request
					console.error(error);
				});
		}

		const form = document.getElementById("settingForm");

		function sendSetting() {

			const data = {
				setting: document.getElementById("setting").value,
				style: document.getElementById("style").value,
				genre: document.getElementById("genre").value,
				character_1_name: document.getElementById("character_1_name").value,
				character_1_gender: document.getElementById("character_1_gender").value,
				character_1_look: document.getElementById("character_1_look").value,
				character_1_personality: document.getElementById("character_1_personality").value,
				character_2_name: document.getElementById("character_2_name").value,
				character_2_gender: document.getElementById("character_2_gender").value,
				character_2_look: document.getElementById("character_2_look").value,
				character_2_personality: document.getElementById("character_2_personality").value,
				character_3_name: document.getElementById("character_3_name").value,
				character_3_gender: document.getElementById("character_3_gender").value,
				character_3_look: document.getElementById("character_3_look").value,
				character_3_personality: document.getElementById("character_3_personality").value,
			};

			postJSON(data);

		}
	</script>

</body>




</html>